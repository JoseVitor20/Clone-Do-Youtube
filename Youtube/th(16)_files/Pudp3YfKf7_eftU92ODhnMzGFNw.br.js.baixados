var ThumbnailPlayerOverlay;(function(n){function ut(){l||(l=!0,k(_w,it,ft,!0))}function ft(){o=[];l=!1}var nt="vrhol",a="vpb",v="vrhot",tt="vadda",it="unload",y="thumbnailPlayerOverlay",u="undefined",i=typeof pMMUtils!=u?pMMUtils:null,p=typeof SmartEvent!=u?SmartEvent:null,f=typeof VideoRichHoverUtils!=u?VideoRichHoverUtils:null,t=typeof VRHConsts!=u?VRHConsts:null,e=!1,r=null,s=null,w=null,b=null,h=null,c=null,k=null,o=[],l=!1,d=typeof GetVRPSaveStatus!=u?GetVRPSaveStatus:null,g;if(!e&&i&&f&&p&&t&&(r=i.gfbc,s=i.sw,w=i.sh,c=i.ac,b=f.showElementTreeFromList,h=VideoRichHoverUtils.showElement,k=p.bind,e=!0),e&&_w&&!_w[y]){_w[y]=n;function rt(n,t,i,r,u,f,s,h,c,l,a,v,y,p){if(e&&n&&!(n.length<1)&&t&&i&&!(i.length<1)&&f&&!(r<1)){o[n]&&(o[n]=null);o[n]=new g(n,t,i,r,u,f,s,h,c,l,a,v,y,p);return}}ut();n.init=rt}g=function(){function n(n,e,o,l,y,p,k,g,it,rt,ut,ft,et,ot){var st=this,ht,ct,lt,at;(this.progressBarContainer=null,this.progressBar=null,this.contextContainer=null,this.playerOverlayContainer=null,this.saveButton=null,this.richHoverConfig=null,this.playerNameStr=null,this.hoverType=null,this.prepareElments=function(n,t,i){return(st.richHoverConfig=i,st.playerNameStr=t,st.playerOverlayContainer=r(nt,n),!st.playerOverlayContainer)?!1:!0},this.prepareMotionThumbnailRelatedElements=function(n,t,f,e,o,s,h,c,l,v){if(e){if(st.progressBarContainer=r(a,st.playerOverlayContainer),st.progressBarContainer){f.push(st.progressBarContainer);var p=t,y=parseInt(st.progressBarContainer.dataset.padding);!isNaN(y)&&y*2<t&&(p=t-2*y);i.sw(st.progressBarContainer,p);st.progressBar=r(a+" cont",st.progressBarContainer)}typeof VolumeIconWithSliderBar!==u&&VolumeIconWithSliderBar&&VolumeIconWithSliderBar.init&&VolumeIconWithSliderBar.init(n,st.playerOverlayContainer,o,s,h,c,l,v)}},this.eventBind=function(){sj_evt.bind(t.PlayerPBUpdateEvt,st.updateProgressbar);sj_evt.bind(t.PlayerEndEvt,st.onHide);sj_evt.bind(t.PlayerResetEvt,st.onHide);sj_evt.bind(t.HoverThumbLoadEvt,st.onShow);sj_evt.bind(t.PlayerReplayEvt,st.onShow);sj_evt.bind(t.FallbackToNonSMTEvt,st.onFallbackToNonSMT);sj_evt.bind(t.HoverCancelEvt,st.eventUnBind);sj_evt.bind(t.OverlaySizeUpdateEvt,st.onResize)},this.eventUnBind=function(){sj_evt.unbind(t.PlayerPBUpdateEvt,st.updateProgressbar);sj_evt.unbind(t.PlayerEndEvt,st.onHide);sj_evt.unbind(t.PlayerResetEvt,st.onHide);sj_evt.unbind(t.HoverThumbLoadEvt,st.onShow);sj_evt.unbind(t.PlayerReplayEvt,st.onShow);sj_evt.unbind(t.FallbackToNonSMTEvt,st.onFallbackToNonSMT);sj_evt.unbind(t.OverlaySizeUpdateEvt,st.onResize)},this.onResize=function(n){var t,i,r;!n||n.length>3||isNaN(n[1])||isNaN(n[2])||(t=st.playerOverlayContainer.parentElement,t)&&(i=parseInt(n[1]),r=parseInt(n[2]),s(t,i),w(t,r))},this.onHide=function(n){!n||n.length<2||n[1]===st.playerNameStr&&f.showElement(st.playerOverlayContainer,!1)},this.onShow=function(n){!n||n.length<2||n[2]===st.playerNameStr&&f.showElement(st.playerOverlayContainer,!0)},this.initializePlayingContext=function(n,t){var e,f,u;st.contextContainer&&(e=!0,f=null,n?f=st.richHoverConfig.ah:t?(f=st.richHoverConfig.mth,e=!1):f=st.richHoverConfig.sth,u=r(v+" cont",st.contextContainer),u&&(st.richHoverConfig.hsth?i.hc(u,"hide")||i.ac(u,"hide"):(u.innerText=f,i.hc(u,"hide")&&i.rc(u,"hide"))),e&&c(st.playerOverlayContainer,"npb"))},this.updateProgressbar=function(n){if(n&&!(n.length<3)&&n[1]===st.playerNameStr){var t=parseFloat(n[2]);!isNaN(t)&&st.progressBar&&s(st.progressBar,t*100+"%")}},this.onFallbackToNonSMT=function(){h(st.playerOverlayContainer,!0);h(st.progressBarContainer,!1);st.initializePlayingContext(st.hoverType==VRHEnums.HoveredElementType.Adult,!1)},this.initSaveButton=function(n,t){var u,f,i;if(st.saveButton=r(tt,n),st.saveButton){var e=t.isSaveable,o=t.mediaUrl,s=t.pageoUrl,h=t.query,c=t.mediaId;if(st.updateSaveButton(e),u=r("sa_wrapper",st.saveButton),f=u.getAttribute("data-eventPayload"),f){if(i=JSON.parse(f),!i)return;i.query=h;i.mid=c;i.murl=o;i.purl=s;u.setAttribute("data-eventPayload",JSON.stringify(i));d&&d.initTarget(n,st.playerOverlayContainer.className)}}},this.updateSaveButton=function(n){n&&i.hc(st.saveButton,"hide")?i.rc(st.saveButton,"hide"):n||i.hc(st.saveButton,"hide")||i.ac(st.saveButton,"hide")},ht=new Array(0),this.richHoverConfig=p,this.prepareElments(e,o,p))&&(ct=k.smtThumbUrl&&k.smtThumbUrl.length>1&&it,this.prepareMotionThumbnailRelatedElements(n,l,ht,ct,g,rt,ut,ft,et,ot),lt=typeof AdultFlag!=u,lt&&AdultFlag.init(n,this.playerOverlayContainer,k.videoUrl,k.mediaUrl,k.imageThumbUrl,k.videoHash,this.richHoverConfig.maa,this.richHoverConfig.ffb),this.contextContainer=r(v,this.playerOverlayContainer),this.contextContainer&&ht.push(this.contextContainer),b(ht,!0),this.hoverType=y,this.initializePlayingContext(y==VRHEnums.HoveredElementType.Adult,ct),this.initSaveButton(e,k),at=(ct?1:0)+(lt?1:0)+(this.saveButton?1:0),c(this.playerOverlayContainer,"icons_"+at),this.eventBind())}return n}()})(ThumbnailPlayerOverlay||(ThumbnailPlayerOverlay={}))