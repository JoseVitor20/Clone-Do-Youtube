var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},VideoRichHoverHandler,VideoRichHover;(function(n){function tu(n,t){fr&&(!t||!t.bindInfos||t.bindInfos.length<1||(u[n]=t,t.isAsyncBind&&sj_evt.bind(ki,iu),er=t.bh,ri(t)))}function iu(n){var t,i;if(n)if(t=null,n.length>1&&(t=n[1]),!t||t.length<1)for(i in u)ri(u[i]?u[i]:null);else ri(u[t]?u[t]:null)}function ri(n){var o,e,u,s,h,c,r,a,f,t;if(n!=null&&(o=hr(n),o!=null&&!(o.length<1))){e=null;switch(n.hmte){case VRHEnums.HoverMouseTriggerEvent.MouseOver:e="mouseover";break;case VRHEnums.HoverMouseTriggerEvent.MouseMove:default:e="mousemove"}for(t=0;t<o.length;t++)if(u=o[t],u!==null&&u.elements!==null&&u.targetInfo!==null)for(s=u.targetInfo,h=0;h<u.elements.length;h++)if((c=u.elements[h],r=ui(c,s),r)&&(a=uu(n),!fu(r)))switch(a){case VRHEnums.HoverPlayType.BackgroundPlay:r.setAttribute(et,null);break;case VRHEnums.HoverPlayType.HoverLoopPlay:r.setAttribute(pt,null);l(r,e,cf,!1,!1);or(r,c,n,s);break;case VRHEnums.HoverPlayType.HoverPlay:r.setAttribute(yt,null);l(r,e,sf,!1,!1);or(r,c,n,s);break;case VRHEnums.HoverPlayType.Null:r.setAttribute(yt,null)}if(n.enHoverAsyncMeta&&(f=au(n),f&&f.length>0))for(t=0;t<f.length;t++)f[t]&&(n.autoRetriveMetaMaxCount&&n.autoRetriveMetaMaxCount>0&&t<n.autoRetriveMetaMaxCount&&lt(f[t],null,null),l(f[t],e,ef,!1,!1));sj_evt.bind(i.HoverManualTriggerEvt,hf,!0);l(_w,"focus",yu,!0);er||l(_w,"blur",wu,!0);n.enAutoPlayOnLoad&&sj_evt.bind("onP1",bf,!0);switch(n.autoPlayType){case VRHEnums.AutoPlayType.OnVisibleWithAutoPlayNext:ii=!0;sj_evt.bind(i.PlayerEndEvt,ci);sj_evt.bind(i.PlayerErrEvt,ci);sj_evt.bind(i.FallbackToNonSMTEvt,ci);case VRHEnums.AutoPlayType.OnVisible:su();sj_evt.bind("onP1",br);sj_be(_w,"scroll",br)}}}function or(n,t,r,u){if(l(n,"touchstart",ff,!1,!1),l(n,"mousemove",te,!1,!1),l(t,"mouseout",ar,!1,!1),r.entabhover===!0){var f=cu(n,u);f&&l(f,"focus",pu,!1,!1)}r.isBoundarySizePersisted&&t.setAttribute(i.BoundarySizePersistedAttachedStr,null);r.enBoundarySizeScale&&t.setAttribute(i.BoundarySizeScaleAttachedStr,null)}function lt(n,t,i){var v,y,f,h,c,l,o,w,a;if(n&&(f=p(n),f)){if(s(f,ot)&&s(f,rt)){t!=null&&i&&i(n,t);return}if(h=parseInt(r(f,ai)),isNaN(h)&&(h=1),!s(f,ot)&&h>0){if(c=(v=r(f,k))!==null&&v!==void 0?v:r(f,e+k),!c)return;if(l=u[c],!l||!l.metauf)return;if(o=sj_gx(),!o)return;dt(f,ot);o.onreadystatechange=function(){if(4==o.readyState){var r=ru(f,200==o.status?o.responseText:"");r?s(f,rt)&&t!=null&&i&&i(n,t,0):(h-=1,kt(f,ai,h),gt(f,ot),lt(n,t,i))}};w=(y=r(f,"mid"))!==null&&y!==void 0?y:r(f,e+"mid");w&&(a=gi(l.metauf,w),a=ur(a,_G.IG,gr+c,nu++),o.open("GET",a,!0),o.send(null))}}}function ru(n,t){var f,i,s,u;if(!n||!t)return!1;if(vt&&typeof VideoRichHoverTestUtils.removeInstLogIfPresent=="function"&&(t=VideoRichHoverTestUtils.removeInstLogIfPresent(t)),i="",o(n,c))i=c;else if(o(n,e+c))i=e+c;else return!1;if(s=r(n,i),!s||s!=t){u=null;try{if(u=JSON.parse(t),!u)return!1;kt(n,i,JSON.stringify((f=u.videoResult)!==null&&f!==void 0?f:u))}catch(h){return!1}return!0}return!1}function uu(n){var t=VRHEnums.HoverPlayType.Null;return n.enBgPlay?t=VRHEnums.HoverPlayType.BackgroundPlay:n.enHoverControl&&(t=n.enLoopPlayOnHover?VRHEnums.HoverPlayType.HoverLoopPlay:VRHEnums.HoverPlayType.HoverPlay),t}function fu(n){return n==null?!0:r(n,yt)||r(n,et)||r(n,pt)}function eu(n){var t=Array(),c,r,f,i,s,h;for(c in u)r=u[c],r&&(n&&r.enAutoPlayOnLoad||r.enAutoPlayNext)&&(f=hr(r),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(sj_evt.fire("VR.AP.List",t),i=0;i<t.length;i++){var l=t[i].targetInfo,e=t[i].elements,a=t[i].targetProperties;if(l!==null&&e!==null&&!(e.length<1))for(s=0;s<e.length;s++)if((h=ui(e[s],l,a.hoverMetaRequired),h!==null)&&!o(h,li))return h}return null}function ou(n){var r=[],e,u,i,t,f;if(!n||!n.bindInfos||n.bindInfos.length<1)return[];for(t=0;t<n.bindInfos.length;t++)if(e=n.bindInfos[t].tsqs,u=n.bindInfos[t].target,e&&u&&u.avbcn&&(i=_d.querySelectorAll(e),i&&i.length>0))for(t=0;t<i.length;t++)f=g(u.avbcn,i[t]),f&&f.length>0&&(r=r.concat.apply(r,f));return r}function su(){var n=[],r,t,i;for(r in u)(t=u[r],t)&&(t.autoPlayType===VRHEnums.AutoPlayType.OnVisible||t.autoPlayType===VRHEnums.AutoPlayType.OnVisibleWithAutoPlayNext)&&(i=ou(t),i&&i.length>0&&(n=n.concat.apply(n,i)));(n===null||n===void 0?void 0:n.length)>0&&(hu(n),ft=n)}function hu(n){n.sort(function(n,t){var i=sj_go(n,"Top"),u=sj_go(n,"Left"),r=sj_go(t,"Top"),f=sj_go(t,"Left");return i!==r?i-r:u-f})}function sr(n){var t,e,o,c,l;if(typeof(n===null||n===void 0?void 0:n.getBoundingClientRect)!="function"||(t=n.getBoundingClientRect(),!t||t.height<=0||t.width<=0))return 0;var i=t.top,r=t.left,u=t.height,f=t.width,s=tr(),h=ir();return s<=0||h<=0?0:(e=0,i>=0&&i+u<=h?e=u:i>=0&&i+u>h?e=h-i:i<=0&&i+u>0&&(e=i+u),o=0,r>=0&&r+f<=s?o=f:r>=0&&r+f>s?o=s-r:r<=0&&r+f>0&&(o=r+f),c=o*1/f,l=e*1/u,c>=.5&&l>=.5&&c*l>=.5?c*l:0)}function cu(n,t){var r,i;if(!t||!n)return null;if(s(n,t.tcn)){if(r=t.ttcn,!r||r.length<1)return null;i=n;do{if(i&&s(i,r))return i;i=i.parentElement}while(i&&i!=_d.body);return null}return null}function lu(n){var u,r,t,f;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(u=[],t=0;t<n.bindInfos.length;t++){var e=n.bindInfos[t].tsqs,i=n.bindInfos[t].target,o={hoverMetaRequired:!!(!n.enHoverAsyncMeta&&!n.enBoundarySizeScale)};if(e&&i&&i.tcn&&i.ttcn&&(r=_d.querySelectorAll(e),r&&r.length>0))for(t=0;t<r.length;t++)f=g(i.ttcn,r[t]),f&&f.length>0&&u.push({targetInfo:i,elements:f,targetProperties:o})}return u.length>0?u:null}function hr(n){var u,r,t,f;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(u=[],t=0;t<n.bindInfos.length;t++){var e=n.bindInfos[t].tsqs,i=n.bindInfos[t].target,o={hoverMetaRequired:!!(!n.enHoverAsyncMeta&&!n.enBoundarySizeScale)};if(e&&i&&i.bcn&&i.tcn&&(r=_d.querySelectorAll(e),r&&r.length>0))for(t=0;t<r.length;t++)f=g(i.bcn,r[t]),f&&f.length>0&&u.push({targetInfo:i,elements:f,targetProperties:o})}return u.length>0?u:null}function au(n){var i,e,u,r,t,f;if(!n||!n.bindInfos||n.bindInfos.length<1)return null;for(i=[],t=0;t<n.bindInfos.length;t++)if(e=n.bindInfos[t].tsqs,u=n.bindInfos[t].target,e&&u&&u.marc&&(r=_d.querySelectorAll(e),r&&r.length>0))for(t=0;t<r.length;t++)f=g(u.marc,r[t]),f&&f.length>0&&(i=i.concat.apply(i,f));return i.length>0?i:null}function ui(n,t,i){var u,f,r;return(i===void 0&&(i=!1),n&&t&&(u=ei(n,c),u))?(f=t.tcn===t.bcn?n:ht(t.tcn,n),i)?(r=oi(u),!r||!r.cid)?null:r.smturl&&r.smturl!=null&&r.smturl.length>0?f:null:f:null}function vu(n){var t=Array(),c,o,f,i,s,r,e,h;for(c in u)o=u[c],o&&(f=lu(o),f!=null&&f.length>0&&(t=t.concat(f)));if(t.length<1)return null;for(i=0;i<t.length;i++)if(s=t[i].targetInfo,r=t[i].elements,s!==null&&r!==null&&!(r.length<1))for(e=0;e<r.length;e++)if(r[e]==n&&(h=ui(n,s,!1),h!==null))return h;return null}function fi(n){sj_evt.fire(n,VRHEnums.HoveredElementType.Adult);sj_evt.fire(n,VRHEnums.HoveredElementType.Algo)}function tt(n){var i,t,f,o;return n?(t=p(n),!t)?!1:(f=(i=r(t,k))!==null&&i!==void 0?i:r(t,e+k),!f)?!1:(o=u[f],!o)?!1:!!o.enHoverAsyncMeta:!1}function yu(){fi(i.HoverEnableEvt)}function pu(n){var i=sj_et(n),t=vu(i);t&&(tt(t)?it(t,VRHEnums.TriggerType.TabTrigger):w(t,VRHEnums.TriggerType.TabTrigger),ut=!0)}function wu(){_d.activeElement!=null&&(_d.activeElement==sj_b||cr(_d.activeElement)?fi(i.HoverEnableEvt):(a(),fi(i.HoverDisableEvt)))}function p(n){for(var t=n,i;t!=null;){if(i=ei(t,c),i)return i;if(s(t,wt))return p(f);t=t.parentNode&&t.parentNode!=t?t.parentNode:null}return null}function ei(n,t){var i,r;if(n){if(o(n,t)===!0||o(n,e+t)===!0)return n;if(n.children&&n.children.length>0)for(i=0;i<n.children.length;i++)if(r=ei(n.children[i],t),r)return r}return null}function bu(n,t,i){for(var r=n,u=_d.querySelectorAll(i),f;r;){for(f=0;f<(u===null||u===void 0?void 0:u.length);f++)if(u[f]===r)return null;if(s(r,t))return r;r=r.parentElement}return null}function ku(n,t){var i=_ge(n);return i==null?null:ht(t,i)}function du(n,t){return h(n,t,VRHEnums.HoverTargetType.Boundary)}function gu(n,t){return h(n,t,VRHEnums.HoverTargetType.Target)}function h(n,t,i){var s,h,e;if(n&&t&&(s=u[t]?u[t].bindInfos:null,s&&s.length>0))for(h=0;h<s.length;h++){var r=s[h],f=null,o=null,c=null,l=!1;switch(i){case VRHEnums.HoverTargetType.Boundary:f=r.target.bcn;break;case VRHEnums.HoverTargetType.CaptionSource:f=r.target.bcn;c=r.target.cscn;l=!0;break;case VRHEnums.HoverTargetType.Target:f=r.target.tcn;break;case VRHEnums.HoverTargetType.PlayerBoundary:f=r.target.pbcn;o=r.target.ppid;break;case VRHEnums.HoverTargetType.MMSTBoundary:f=r.target.mbcn;o=r.target.mpid;break;case VRHEnums.HoverTargetType.CaptionTarget:f=r.target.ctcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.LinkTarget:f=r.target.ltcn;o=r.target.tpid;break;case VRHEnums.HoverTargetType.ScaleCanvas:return _ge(r.target.scid);case VRHEnums.HoverTargetType.DuplicateSource:f=r.target.dscn;break;case VRHEnums.HoverTargetType.DuplicateTarget:return _ge(r.target.dtid)}if(f&&(e=null,o!=null?e=ku(o,f):(e=bu(n,f,r.tsqs),e&&l&&(e=c!=null?ht(c,e):null)),e))return e}return null}function cr(n){return rr(wt,n)!=null}function nf(n,t){var i=[],r;if(_d.elementsFromPoint?i=_d.elementsFromPoint(n,t):_d.msElementsFromPoint&&(i=_d.msElementsFromPoint(n,t)),(i===null||i===void 0?void 0:i.length)>0)for(r=0;r<i.length;r++)if(s(i[r],wt))return!0;return!1}function oi(n){var f,u=null,i=null,o=null,s=(f=r(n,c))!==null&&f!==void 0?f:r(n,e+c),t;if(!s)return null;try{u=tf(n);u||(t=JSON.parse(s),i=t.capt,i&&(o={de:i.de,filterUrlFormat:null,pu:i.pu,puid:i.puid,pud:i.pud,r:i.r,s:i.s,sk:i.sk,t:t.vt,vc:i.vc,actkeylst:i.actkeylst,actpayload:i.actpayload,saved:i.saved,du:t.du,mid:t.mid,creatorName:i.crtname,creatorId:i.crtid,creatorAvatar:i.crtaurl}),u={ma:!!(t.bv&2),at:!!(t.bv&4),capt:o,cc:t.cc,cid:t.cid,ct:t.ct,du:t.du,md5:t.md5,mid:t.mid,mmsturl:t.mmsturl,paid:!!(t.bv&1),purl:t.purl,smturl:t.smturl,thid:t.thid,vt:t.vt,bci:t.bci,murl:t.murl,sab:!!(t.bv&8),pgurl:t.pgurl,q:t.q,el:!!(t.bv&16),reid:t.reid})}catch(h){u=null}return u}function tf(n){var s,h,l,a,v,y,p,i=(s=r(n,k))!==null&&s!==void 0?s:r(n,e+k),b=(h=r(n,c))!==null&&h!==void 0?h:r(n,e+c),f,o,t,w;return!i||!b?null:(f=u[i],!f)?null:(o=(a=(l=r(n,"mid"))!==null&&l!==void 0?l:r(n,e+"mid"))===null||a===void 0?void 0:a.toUpperCase(),!o)?null:(t=JSON.parse(b),!t)?null:(w=!!((v=r(n,vi))!==null&&v!==void 0?v:r(n,e+vi)),o===((y=t.videoId)===null||y===void 0?void 0:y.toUpperCase())||vt&&t.videoId)?uf(t,f,i,w):o===((p=t.mid)===null||p===void 0?void 0:p.toUpperCase())||vt&&t.mid?rf(t,f,i,w):null}function rf(n,t,i,r){var u=n.capt,f;return u&&(f={de:u.de,filterUrlFormat:null,pu:u.pu,puid:u.puid,pud:u.pud,r:u.r,s:u.s,sk:u.sk,t:n.vt,vc:u.vc,actkeylst:u.actkeylst,actpayload:u.actpayload,saved:u.saved,du:n.du,mid:n.mid,creatorName:u.crtname,creatorId:u.crtid,creatorAvatar:u.crtaurl}),{ma:!!n.ma,at:!!n.at,capt:f,cc:n.cc,cid:i,ct:n.ct,du:n.du,md5:n.md5,mid:n.mid,mmsturl:n.mmsturl,paid:!!n.paid,purl:n.purl,smturl:n.smturl,thid:n.thid,vt:n.vt,bci:n.bci,murl:n.murl,sab:r,pgurl:n.pgurl,q:n.q,el:t.enLoopPlay,reid:n.reid}}function uf(n,t,i,r){var f,e,o,s,h,c,l,a,v,u=(f=n.publisher)===null||f===void 0?void 0:f[0],y={de:n.description,filterUrlFormat:null,pu:u===null||u===void 0?void 0:u.name,puid:u===null||u===void 0?void 0:u.name,pud:n.datePublished,r:null,s:null,sk:null,t:n.name,vc:(e=n.viewCount)===null||e===void 0?void 0:e.toString(),actkeylst:null,actpayload:null,saved:!1,du:n.duration,mid:n.videoId,creatorName:(s=(o=n.followableTargetObject)===null||o===void 0?void 0:o.creator)===null||s===void 0?void 0:s.name,creatorId:(c=(h=n.followableTargetObject)===null||h===void 0?void 0:h.creator)===null||c===void 0?void 0:c.id,creatorAvatar:(v=(a=(l=n.followableTargetObject)===null||l===void 0?void 0:l.creator)===null||a===void 0?void 0:a.image)===null||v===void 0?void 0:v.thumbnailUrl};return{ma:!!n.isAdult,at:!!n.isAdult,capt:y,cc:b.getClipsCountFromVideoResult(n),cid:i,ct:b.getClipsTimelineFromVideoResult(n),du:n.duration,md5:n.videoId,mid:n.videoId,mmsturl:b.getThumbnailUrlFromVideoResult(n,"MultiMotionStatic",n.isAdult,t.pid),paid:!!!n.isAccessibleForFree,purl:n.hostPageUrl,smturl:b.getThumbnailUrlFromVideoResult(n,"MultiMotion",n.isAdult,t.pid),thid:b.getThumbnailIdFromVideoResult(n,"Large"),vt:n.name,bci:0,murl:n.contentUrl,sab:r,pgurl:n.hostPageUrl,q:nr("q"),el:t.enLoopPlay,reid:null}}function ff(n){var t=sj_et(n);st=t;sb_st(function(){st=null},500)}function ef(n){ct=n;var t=sj_et(n);t&&lt(t,null,null)}function sf(n){if(ti){ct=n;var t=sj_et(n);st!=t&&(tt(t)?it(t,VRHEnums.TriggerType.MouseTrigger):w(t,VRHEnums.TriggerType.MouseTrigger),ut=!0)}}function hf(n){if((n===null||n===void 0?void 0:n.length)>1){var t=n[1];tt(t)?it(t,VRHEnums.TriggerType.ManualTrigger):w(t,VRHEnums.TriggerType.ManualTrigger)}}function cf(n){ct=n;var t=sj_et(n);st!=t&&(tt(t)?it(t,VRHEnums.TriggerType.HoverLoopPlayTrigger):w(t,VRHEnums.TriggerType.HoverLoopPlayTrigger),ut=!0)}function it(n,t){if(n){var i=p(n);i&&(dt(i,rt),lt(n,t,w))}}function w(n,t,i){var c,u,l,e,s,w,b,v,g;if(i===void 0&&(i=-1),t!==VRHEnums.TriggerType.VisibleAutoPlayTrigger&&(y=null),c=p(n),!c){f&&a();return}if((u=oi(c),u&&u.cid)&&(l=gu(n,u.cid),l!==f&&l!=null)&&(o(l,et)||(f=l),e=parseInt(r(c,"ht")),e||(e=0),!(e>=0)||!(e<d.length)||d[e]!==!1)&&(s=du(n,u.cid),s)){var k=h(n,u.cid,VRHEnums.HoverTargetType.PlayerBoundary),rt=h(n,u.cid,VRHEnums.HoverTargetType.MMSTBoundary),ut=h(n,u.cid,VRHEnums.HoverTargetType.CaptionSource),ft=h(n,u.cid,VRHEnums.HoverTargetType.CaptionTarget),ot=h(n,u.cid,VRHEnums.HoverTargetType.LinkTarget),st=h(n,u.cid,VRHEnums.HoverTargetType.ScaleCanvas),ht=h(n,u.cid,VRHEnums.HoverTargetType.DuplicateSource),lt=h(n,u.cid,VRHEnums.HoverTargetType.DuplicateTarget),nt=null;if(k!=null&&(w=k.getElementsByClassName(dr),w&&w.length>0&&(b=w[0].getElementsByTagName("img"),b&&b.length>0&&(nt=b[0]))),v=s.getElementsByTagName("img"),v&&v.length>0){var at=v[0].clientHeight,vt=v[0].clientWidth,tt=s.clientWidth,it=s.clientHeight;u.capt&&u.capt.sk&&(u.capt.sk=af(s));g={containerId:u.cid,containerHeight:it,containerWidth:tt,hoverType:e,thumbnailHeight:Math.min(it,at),thumbnailWidth:Math.min(tt,vt),videoRichHoverMetaData:u,instMetaData:null,hoveredElement:s,triggerType:t,playerTargetEl:k,mmstTargetEl:rt,captionSourceEl:ut,captionTargetEl:ft,linkTargetEl:ot,playerThumbnailEl:nt,scaledCanvasEl:st,duplicateSourceEl:ht,duplicateTargetEl:lt,hoverDelayMsOverwrite:i,mouseEvent:ct};ni&&(bt=ni(c,e,u.cid),g.instMetaData=bt);sj_evt.fire(bi,g,s,lf(u))}}}function lf(n){if(!n)return null;var t=VRHEnums.ThumbnailType.ST;return n.mmsturl&&n.smturl&&n.cc>0?t=VRHEnums.ThumbnailType.MMMT:n.smturl&&(t=VRHEnums.ThumbnailType.MT),t}function af(n){var t,u,f,e,i,r;if(!n)return null;if(t=g("rms_img",n),u=[],t&&t.length>0){for(f=0;f<t.length;f++)if(e=di(t[f]),i=e.split(" "),i)for(r=0;r<i.length;r++)i[r].match("rms_rmsanswers")&&u.push(i[r]);if(u.length>0)return u.join(" ")}return null}function lr(){f!==null&&(f=null,bt=null)}function ar(n){var t,i;nf(n.clientX,n.clientY)||(t=p(sj_et(n)),t&&s(t,rt)&&gt(t,rt),f&&!o(f,pt))&&(i=vr(sj_mo(n)),i!==vr(f)&&f&&a())}function vr(n){var r,e,t,i;return typeof u==v||!u?null:(cr(n)&&(n=f),r=p(n),e=null,r&&(t=oi(r),t&&(i=u[t.cid],typeof i!=v&&i&&(e=h(n,t.cid,i.hmot)))),e)}function a(){f&&o(f,et)||(nt&&df(),sj_evt.fire(i.HoverCancelEvt),lr())}function vf(n){n&&n.length>1?ar(n[1]):f&&a()}function yf(n,t,i){for(var r=n,u=null,f,e;r!=null;){if(u=yr(r),u)break;r=r.parentNode&&r.parentNode!=r?r.parentNode:null}if(!u&&n)for(f=n.getElementsByTagName("a"),e=0;e<(f===null||f===void 0?void 0:f.length);e++)if(u=yr(f[e]),u)break;return u?__assign(__assign({},u),{HoverType:t,HoverContainerId:i}):null}function yr(n){var t,i,u,f,e;return n?(t="h",i="data-h",(o(n,t)||o(n,i))&&(u=r(n,t)||r(n,i),u&&(f=u.match(/ID=[\w]+(\.[\w]+)*(\.[\d]+_[\d]+)*,[\d]+\.[\d]+/),f)))?(e=f[0].substr(3).split(","),{AppNS:e[0],K:e[1]}):null:null}function pf(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<d.length&&t>=0&&(d[t]=!0)}}function wf(n){if(n&&!(n.length<2)){var t=parseInt(n[1]);t<d.length&&t>=0&&(d[t]=!1)}}function bf(){si(!0)}function pr(){si(!1)}function si(n){if(!ut&&!nt){nt=!0;var t=eu(n);tt(t)?it(t,VRHEnums.TriggerType.AutoplayTrigger):w(t,VRHEnums.TriggerType.AutoplayTrigger)}}function wr(n){tt(n)?it(n,VRHEnums.TriggerType.VisibleAutoPlayTrigger):w(n,VRHEnums.TriggerType.VisibleAutoPlayTrigger);y=ii?hi(n):null}function br(){if(y=null,sr(f)<i.AutoPlayVisibilityThreshold){a();var n=hi();n!==null&&wr(n);return}ii&&(y=hi(f))}function hi(n){var u,t,r;if(!ft)return null;for(u=-1,n&&(u=ft.indexOf(n)),t=u+1;t<ft.length;t++)if(r=ft[t],r&&sr(r)>i.AutoPlayVisibilityThreshold)return r;return null}function kr(){nt&&(a(),si(!1))}function ci(){y&&wr(y)}function kf(n){if(n&&!(n.length<2)){var t=n[1];t?(sj_evt.bind(i.AutoPlayNext,pr),sj_evt.bind(i.FallbackToNonSMTEvt,kr)):(sj_evt.unbind(i.AutoPlayNext,pr),sj_evt.unbind(i.FallbackToNonSMTEvt,kr))}}function df(){f!==null&&f.setAttribute(li,null);nt=!1}function gf(){nt=!1;ut=!1}function ne(n){switch(n.key){case"Esc":case"Escape":a();ti=!1}}function te(){ti=!0}function ie(){t&&t.ha&&t.gebc&&t.ga&&t.sa&&t.hc&&t.ac&&t.rc&&t.sf&&t.qsv&&t.gaebc&&t.gfbc&&t.tsu&&t.gcw&&t.gch&&b&&i&&at&&at.bind&&(o=t.ha,g=t.gebc,r=t.ga,kt=t.sa,s=t.hc,di=t.gcn,dt=t.ac,gt=t.rc,gi=t.sf,nr=t.qsv,rr=t.gaebc,ht=t.gfbc,ur=t.tsu,tr=t.gcw,ir=t.gch,l=at.bind,pi=i.HoverDisableEvt,yi=i.HoverEnableEvt,bi=i.HoverMouseInEvt,wi=i.HoverStopEvt,ni=yf,ki=i.HoverAsyncBindEvt,f=null,sj_evt.bind(i.PlayerEndEvt,a),sj_evt.bind(i.HoverCleanupEvt,lr),sj_evt.bind(i.AutoPlayNextStatusUpdateEvt,kf),sj_evt.bind(wi,vf),sj_evt.bind(yi,pf),sj_evt.bind(pi,wf),sj_evt.bind(i.AutoPlayReset,gf),sj_be(_d,"keydown",ne),fr=!0)}var v="undefined",t=typeof pMMUtils!=v?pMMUtils:null,b=typeof VideoRichHoverUtils!=v?VideoRichHoverUtils:null,at=typeof SmartEvent!=v?SmartEvent:null,i=typeof VRHConsts!=v?VRHConsts:null,vt=typeof VideoRichHoverTestUtils!=v,yt="vrhatt",pt="hapatt",et="bpatt",li="apEnd",c="vrhm",wt="vrhc",dr="cico",k="hcid",ai="rt",ot="retrieved",vi="sab",rt="onhov",e="data-",gr=_G.P+".vrh.",f=null,st=null,bt=null,yi=null,pi=null,wi=null,bi=null,ki=null,d=[!0,!0],o=null,r=null,kt=null,g=null,s=null,di=null,dt=null,gt=null,gi=null,nr=null,l=null,tr=null,ir=null,ht=null,rr=null,ur=null,ni,fr=!1,u={},er=!1,ut=!1,ti=!0,nt=!1,nu=0,ct=null,y=null,ii=!1,ft=[];n.init=tu;ie()})(VideoRichHoverHandler||(VideoRichHoverHandler={})),function(n){function ar(){u&&t&&ct&&ei&&!oi&&(lt=ei.bind,rt=u.ga,si=u.ha,c=u.sa,wt=u.gcn,lr=u.sc,b=u.hc,bt=u.sp,kt=u.goh,ut=u.gow,hi=u.go,v=u.gfbc,ci=u.gaebc,ai=u.sw,vi=u.sl,y=u.ac,l=u.rc,ft=ct.updateTargetBySource,dt=ct.showElement,li=ct.getOffsetWithScroll,yr(),oi=!0,sj_evt.fire(t.HoverReadyEvt))}function vr(n,t){!n||!t||t.length<1||!n.bindInfos||n.bindInfos.length<1||(nt[t]||(nt[t]=n),(n.enhoverhb||n.enmmstinst||n.enperfinst)&&typeof VideoRichHoverInst!="undefined"&&VideoRichHoverInst&&VideoRichHoverInst.init&&VideoRichHoverInst.init(t,n),typeof VideoRichHoverHandler!=o&&VideoRichHoverHandler.init&&VideoRichHoverHandler.init(t,n))}function yr(){sj_evt.bind(t.HoverMouseInEvt,nr);sj_evt.bind(t.PlayerLoadEvt,pi);sj_evt.bind(t.PlayerStartEvt,wi);sj_evt.bind(t.PlayerDownloadEndEvt,bi);sj_evt.bind(t.FallbackToNonSMTEvt,ki);sj_evt.bind(t.PlayerEndEvt,yt);sj_evt.bind(t.PlayerErrEvt,yt);sj_evt.bind(t.HoverCancelEvt,gi);sj_evt.bind(t.HoverMMSTShowEvt,ir);sj_evt.bind(t.HoverMMSTHideEvt,ni);sj_evt.bind(t.UnloadHover,yi)}function yi(){sj_evt.unbind(t.HoverMouseInEvt,nr);sj_evt.unbind(t.PlayerLoadEvt,pi);sj_evt.unbind(t.PlayerStartEvt,wi);sj_evt.unbind(t.PlayerDownloadEndEvt,bi);sj_evt.unbind(t.FallbackToNonSMTEvt,ki);sj_evt.unbind(t.PlayerEndEvt,yt);sj_evt.unbind(t.PlayerErrEvt,yt);sj_evt.unbind(t.HoverCancelEvt,gi);sj_evt.unbind(t.HoverMMSTShowEvt,ir);sj_evt.unbind(t.HoverMMSTHideEvt,ni);sj_evt.unbind(t.UnloadHover,yi)}function vt(n){return n&&n.length>2&&n[2]===ht}function pi(){}function wi(n){vt(n)&&sj_evt.fire(t.CaptionHideEvt,n[1])}function bi(n){vt(n)&&r&&y(r,"hvpv")}function ki(n){vt(n)&&r&&l(r,"hvpv")}function yt(n){vt(n)&&(st(),sj_evt.fire(t.AutoPlayNext))}function pr(n,t){for(var i=n;i;){if(i.offsetParent===t)return t;i=i.offsetParent}return t?t.offsetParent:null}function di(n){var t,i;if(n)for(t=0;t<n.length;t++)if(n[t]&&n[t].id&&(i=_ge(n[t].id),i))return i;return null}function wr(n){var yt,b,l,ai,st,kt,u,ct,vi,yi,pi,ut,wi,lt,at,tt,it,ni,vt;if(n&&(b=n.containerId,l=nt[b],l)&&(l.chflturl&&n&&n.videoRichHoverMetaData&&n.videoRichHoverMetaData.capt&&(n.videoRichHoverMetaData.capt.filterUrlFormat=l.chflturl),l.tw&&(n.containerWidth=n.thumbnailWidth=l.tw),l.th&&(n.containerHeight=n.thumbnailHeight=l.th),a=_ge(b),a&&a.attributes)){var pt=l.interactionType===VRHEnums.HoverInteractionType.Inline,g=pt?n.containerWidth:n.thumbnailWidth,bi=pt?n.containerHeight:n.thumbnailHeight;h=n.playerTargetEl;var et=n.mmstTargetEl,d=n.captionTargetEl,ei=h!=null?h.clientWidth:g,ki=h!=null?h.clientHeight:n.thumbnailHeight,oi=et!=null?et.clientWidth:g,hi=d!=null?d.clientWidth:g,gi=wt(a),ci=gi.replace(" hide",""),li=br(n.hoveredElement,l),bt=kr(li);if((r=sj_ce("div",null,ci),r)&&(ai=["class","data-tag","data-priority"],ai.forEach(function(n){return si(a,n)?c(r,n,rt(a,n)):null}),st=r,bt&&(r.appendChild(bt),st=bt),kt=a.content,kt?st.appendChild(kt.cloneNode(!0)):ft(st,a,l.encc),k=n.instMetaData,u=n.videoRichHoverMetaData,ct=0,typeof CaptionContainer!=o&&CaptionContainer.init&&CaptionContainer.init(b,r,hi,!0,u.capt,n.instMetaData,n.hoveredElement,l.ehm,ht),vi={containerWidth:oi,thumbCnt:u.cc,mmstUrl:u.mmsturl,isAdultThumb:u.at,videoTitle:u.vt},typeof MultiMotionStaticThumbnail!=o&&MultiMotionStaticThumbnail.init&&(MultiMotionStaticThumbnail.init(b,r,vi,l,n.instMetaData),ct=MultiMotionStaticThumbnail.clientHeight(b)),yi=cr?VideoRichHoverTestUtils.getMockedClipsTimeline(u.ct,u.cc):u.ct,pi={videoUrl:u.purl,mediaUrl:u.murl,thid:u.thid,smtThumbUrl:u.smturl,videoHash:u.md5,thumbnailHeight:ki,thumbnailWidth:ei,isMediaAdult:u.ma,isAdultThumb:u.at,isDebug:!0,isPaidContent:u.paid,expandable:!0,playClipsCount:nt[b].mmstcnt,clipsCount:u.cc,clipsTimeline:yi,updatePlayProgress:!0,imageThumbUrl:null,videoTitle:u.vt,cookiePre:l.cookiePre,beginClipIndex:u.bci>0?u.bci:0,endClipIndex:l.pcc>0&&u.bci>0?u.bci+l.pcc-1:0,mediaId:u.mid,isSaveable:u.sab,pageoUrl:u.pgurl,query:u.q,enableLoop:u.el,playerEndAction:l.pea,enablePlayerFitCover:l.enpfc,eventHandlerMap:l.ehm},typeof ThumbnailPlayer!=o&&ThumbnailPlayer.init&&(ThumbnailPlayer.init(b,g,n.hoverType,l,r,ht,pi,n.instMetaData),ct+=ThumbnailPlayer.clientHeight(b)),typeof IframeContainer!=o&&IframeContainer.init&&IframeContainer.init(b,r,f,u.q,u.mid,li,ht,k),ut=null,pt?(ut=i,wi=d!=null?d.clientHeight:Math.max(0,bi-ct),sj_evt.fire(t.HoverCaptionHUpdateEvt,wi)):(lt=di(f.boundaryElIds),lt||(lt=_d.body),ut=lt),ut)){if(((yt=f.attachInfos)===null||yt===void 0?void 0:yt.length)>0)for(at=0;at<f.attachInfos.length;at++)tt=f.attachInfos[at],tt&&tt.scn&&tt.dpcn&&i&&(it=v(tt.scn,r),ni=v(tt.dpcn,i),it&&ni&&(c(it,"data-priority","2"),ni.appendChild(it),w.push(it),dt(it,!0)));h&&(e=v(ii,r),e&&(y(e,"outer_pc"),ot(h,e,ii,ei),sj_evt.fire(t.OverlaySizeUpdateEvt,g,n.thumbnailHeight)));et&&(s=v(ri,r),s&&ot(et,s,ri,oi));d&&(n.captionSourceEl!=null?l.isCaptionReplaced?ft(d,n.captionSourceEl,l.encc):(vt=sj_ce("div",null,fi),ft(vt,n.captionSourceEl,l.encc),ot(d,vt,fi,0),tr(vt)):(p=v(ui,r),p&&ot(d,p,ui,hi)));ot(ut,r,ci,g);nu(n.duplicateSourceEl,n.duplicateTargetEl);uu();switch(f.interactionType){case VRHEnums.HoverInteractionType.MouseFollow:ti(n.mouseEvent);sj_be(_d,"mousemove",ti);break;case VRHEnums.HoverInteractionType.PopOut:if(!au(i,r,l)){sj_evt.fire(t.HoverCancelEvt);return}}gt(r,l.ic>0);gt(e,l.ic>0);gt(s,l.ic>0)}}}function ot(n,t,i,r){var u=n.firstChild;u&&b(u,i)&&u.parentNode==n&&(n.removeChild(u),u=n.firstElementChild);c(n,"aria-live","polite");n.insertBefore(t,u);r>0&&ai(t,r);dt(t,!0)}function gt(n,t){n!=null&&(sj_evt.fire("focusChange",n),lt(n,"mouseout",ru),t&&lt(n,"click",eu),et.triggerType==VRHEnums.TriggerType.TabTrigger&&lt(n,"focusout",dr))}function br(n,t){var u,f,e,i,r;if(!t||!n||!t.bindInfos||t.bindInfos.length<1)return null;for(u=0;u<t.bindInfos.length;u++)if(f=t.bindInfos[u],b(n,f.target.bcn)&&(e=f.target.tacn,i=rr(n),i&&i.length>0))for(r=0;r<i.length;r++)if(b(i[r],e))return i[r];return null}function kr(n){var t,i,r;return n&&n.href?(t=sj_ce("a",null,"hover-anchor"),t.href=n.href,n.target&&(t.target=n.target),i=rt(n,"h"),i&&c(t,"h",i),r=rt(n,"aria-label"),r&&c(t,"aria-label",r),t):null}function dr(n){n&&_d&&_d.activeElement&&sb_st(function(){var n=_d.activeElement;if(!hu(n)&&!pt(n)){sj_evt.fire(t.HoverStopEvt);return}},10)}function gi(){at===!0?tt||(tt=function(){sj_evt.fire(VRHConsts.StopPlayEvt,k);st();sj_evt.fire(VRHConsts.HoverCleanupEvt)}):(sj_evt.fire(VRHConsts.StopPlayEvt,k),st());sj_evt.fire(VRHConsts.HoverCleanupEvt)}function gr(n){while(n){if(n.tagName=="a"||n.tagName=="A")return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function nr(n){var u,r,e,s;if(n&&n.length>2){if(u=n[2],r=n[1],!r||!r.containerHeight||!r.containerWidth||!r.videoRichHoverMetaData)return;if(at===!0){sj_evt.fire(VRHConsts.HoverCleanupEvt);return}if(u&&u!==i)iu(r),i==null||i.hasAttribute(or)||(sj_evt.fire(VRHConsts.StopPlayEvt,k),st()),i=u,et=r,g=r.scaledCanvasEl;else return;if(e=nt[r.containerId],!e)return;f=e;at=!0;tt=null;it!=null&&i.hasAttribute(t.BoundarySizePersistedAttachedStr)&&i!=it&&(l(it,d),it=null,g&&l(g,d));i.hasAttribute(t.BoundarySizeScaleAttachedStr)&&(y(i,d),g&&y(g,d));s=r.hoverDelayMsOverwrite!=null&&!isNaN(r.hoverDelayMsOverwrite)&&r.hoverDelayMsOverwrite>=0?r.hoverDelayMsOverwrite:e.hoverdelayms;sb_st(function(){sj_evt.fire(t.HoverStartEvt,r.instMetaData,r.triggerType,u);sj_evt.fire(t.AutoPlayNextStatusUpdateEvt,!!(r.triggerType===VRHEnums.TriggerType.AutoplayTrigger&&e.enAutoPlayNext));_w!==_w.parent&&typeof MMMessenger!=o&&MMMessenger.Post(_w.parent,VRHEnums.IframeMessage.PreviewStarted,null);wr(r);tt&&(tt(),tt=null);at=!1},s);tu(r)}}function nu(n,t){var i,u,e;if(n!=null&&t!=null){var s=wt(n),o=s.split(" "),r=t;for(i=0;i<o.length;i++)if(u=v(o[i],t),u){r=u;break}ft(r,n,f===null||f===void 0?void 0:f.encc);e=v(er,r);e&&tr(e)}}function tu(n){var i=n.videoRichHoverMetaData,t;i!=null&&(t=n.linkTargetEl,t!=null&&(c(t,"href",i.purl),c(t,"aria-label",i.vt)))}function tr(n){if(i&&i.parentElement&&i.hasAttribute(t.BoundarySizeScaleAttachedStr)){var o=i.parentElement,u=hi(i)[0],f=ut(i),s=ut(o),e=ci("scrollbar",i),r=e!=null?u-e.scrollLeft:u;r<s-r-f&&vi(n,r+f+sr)}}function iu(n){var e=n.containerId,u=nt[e],t,r,i;if(u!=null&&(t=n.videoRichHoverMetaData,t!=null)&&(r=n.playerThumbnailEl,i=n.playerTargetEl,r!=null&&i!=null)){var o=t.thid,s=t.at,h=i.clientWidth,l=i.clientHeight,a=u.pid,f=ThUrlGenerator.NewThumbnailUrl(o,s,h,l,a,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);f!=null&&c(r,"src",f)}}function ru(n){pt(sj_mo(n))||sj_evt.fire(t.HoverStopEvt,n)}function uu(){i&&y(i,"onhov");h&&y(h,"onhov")}function fu(){i&&(l(i,"onhov"),i.hasAttribute(t.BoundarySizePersistedAttachedStr)?it=i:i.hasAttribute(t.BoundarySizeScaleAttachedStr)&&(l(i,d),l(g,d)));h&&l(h,"onhov")}function ir(){i&&y(i,"mmsts")}function ni(){i&&l(i,"mmsts")}function eu(n){var s=sj_et(n),h,u,r,e;if(pt(s)&&!gr(s)&&i&&ur()&&et&&((new Image).src=_G.gpUrl+"IG="+_G.IG+"&"+rt(i,"h"),h=et.hoverType,u=!1,h===VRHEnums.HoveredElementType.Adult?(typeof AnsSSDlg!=o&&typeof AnsSSDlg.sw=="function"&&AnsSSDlg.sw(n,"vdo_ans_ss_dlg"),u=!0):n.ctrlKey||n.button==1||(r=su(ou(i,f?f.bindInfos:null)),r&&(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,_w,0,0,0,0,0,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,r),r.dispatchEvent(e),typeof si_ct=="function"&&si_ct(r)),u=!0),sj_evt.fire(t.HoverDisableEvt,VRHEnums.HoveredElementType.Algo),st(),u)){sj_pd(n);sj_sp(n);return}}function ou(n,t){var r;if(n&&t)for(r=0;r<t.length;r++){for(var u=t[r],f=u.target,i=n;i&&!b(i,f.bcn);)i=i.parentElement;if(i)return i}return null}function rr(n){return n?n.getElementsByTagName("a"):null}function su(n){var i=rr(n),t;if(i)for(t=0;t<i.length;t++)if(!pt(i[t]))return i[t];return n}function pt(n){while(n!=null){if(b(n,fr))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function hu(n){while(n!=null){if(b(n,hr))return!0;n=n.parentNode&&n.parentNode!=n?n.parentNode:null}return!1}function ur(){return r!=null||e!=null||s!=null}function st(){ni();fu();ur()&&(cu(),lu(),sj_evt.fire(VRHConsts.HoverMouseOutEvt,k));sj_ue(_d,"mousemove",ti);k=null;i=null;et=null}function cu(){var n=null,i,t;if(r!=null&&r.parentElement!=null&&(n=r.parentElement,n.removeChild(r)),e!=null&&e.parentElement!=null&&(n=e.parentElement,n.removeChild(e)),s!=null&&s.parentElement!=null&&(n=s.parentElement,n.removeChild(s)),p!=null&&p.parentElement!=null&&(n=p.parentElement,n.removeChild(p)),(w===null||w===void 0?void 0:w.length)>0)for(i=0;i<w.length;i++)t=w[i],(t===null||t===void 0?void 0:t.parentElement)&&(n=t.parentElement,n.removeChild(t));return w=[],n!=null}function lu(){f.encc!==!0&&(r!=null&&(r.innerHTML=null),e!=null&&(e.innerHTML=null),s!=null&&(s.innerHTML=null));r=null;e=null;s=null}function ti(n){if(r&&n){var t=vu(n.clientX,n.clientY);bt(r,t.l,t.t)}}function au(n,t,i){var r=yu(t,n,i);return r?(bt(t,r.l,r.t),!0):!1}function vu(n,t){var i=n+VRHConsts.MouseRightMargin,u=t+VRHConsts.MouseBottomMargin,f=sb_de.clientWidth,s=sb_de.clientHeight,e=r.clientWidth,o=r.clientHeight,h=i+e>f,c=u+o>s;return h&&c?(i=f-e,u=t-o-VRHConsts.MouseTopMargin):h?i=f-e:c&&(u=s-o),{l:i,t:u}}function yu(n,t,i){var o,c,l;if(!i||!n||!t||(o=pr(t,di(f.boundaryElIds)),!o))return null;var e=pu(o,i),a=li(t,o,f.sd),r=a[0],u=a[1],s=ut(t),h=kt(t);if(e.l>r+s/2||e.t>u+h/2||e.r<r+s/2||e.b<u+h/2)return null;c=ut(n);l=kt(n);r-=(c-s)/2;r=Math.ceil(r);r=Math.min(r,e.r-c-2);r=Math.max(r,e.l);switch(i.va){case VRHEnums.HoverVerticalAlignType.Top:break;case VRHEnums.HoverVerticalAlignType.Middle:default:u-=(l-h)/2}return u=Math.floor(u),u=Math.min(u,e.b-l-2),u=Math.max(u,e.t),{l:r,t:u}}function pu(n,t){var i,r;if(!n)return{l:0,t:0,r:0,b:0};i={l:0,t:0,r:n.clientWidth,b:n.clientHeight};switch(t===null||t===void 0?void 0:t.obt){case VRHEnums.OffsetBoundaryType.Content:if(r=_w.getComputedStyle(n),r){var u=parseFloat(r.paddingTop),f=parseFloat(r.paddingRight),e=parseFloat(r.paddingBottom),o=parseFloat(r.paddingLeft);i.l+=isNaN(o)?0:o;i.t+=isNaN(u)?0:u;i.r-=isNaN(f)?0:f;i.b-=isNaN(e)?0:e}}return i}var ht="VRTP",fr="vrhc",ii="vrhtpc",ri="vhcic",ui="vrhcs",fi="vrhcac",er="mc_vtvc_meta_w",or="bpatt",d="scale",o="undefined",sr=16,hr="fbdialog",u=typeof pMMUtils!=o?pMMUtils:null,ei=typeof SmartEvent!=o?SmartEvent:null,ct=typeof VideoRichHoverUtils!=o?VideoRichHoverUtils:null,cr=typeof VideoRichHoverTestUtils!=o,t=typeof VRHConsts!=o?VRHConsts:null,a=null,r=null,i=null,e=null,s=null,p=null,h=null,it=null,g=null,w=[],oi=!1,lt=null,lr=null,rt=null,si=null,c=null,wt=null,bt=null,ut=null,kt=null,hi=null,v=null,ci=null,b=null,dt=null,li=null,ai=null,vi=null,at=!1,y=null,l=null,ft=null,f=null,et,k=null,nt={},tt;n.init=vr;ar()}(VideoRichHover||(VideoRichHover={}))