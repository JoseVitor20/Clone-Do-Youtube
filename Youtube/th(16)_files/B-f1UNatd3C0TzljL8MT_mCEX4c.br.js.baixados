var ThumbnailPlayer;(function(n){function pt(){p||(p=!0,rt(_w,ct,wt,!0))}function wt(){f=[];p=!1}function ut(n,t,i,r,u,f,e,o){var s=null,h=!0;switch(n){case VRHEnums.ThumbnailType.ST:s=ThUrlGenerator.NewThumbnailUrl(t,i,u,f,e,ThUrlGenerator.CroppingType.SmartRatio,ThUrlGenerator.ResizeMode.Ratio);r==VRHEnums.HoveredElementType.Adult&&(s+="&m=3");break;case VRHEnums.ThumbnailType.MT:case VRHEnums.ThumbnailType.MMMT:h=!1;s=o;break;default:return null}return k(s,h)}function bt(n){if(f[n])return f[n].clientHeight}var et="vrhi",ot="vt_vp",st="vrhtpc",ht="player_ol",ct="unload",w="thumbnailplayer",h="undefined",i=typeof pMMUtils!=h?pMMUtils:null,v=typeof SmartEvent!=h?SmartEvent:null,r=typeof VideoRichHoverUtils!=h?VideoRichHoverUtils:null,t=typeof VRHConsts!=h?VRHConsts:null,c=!1,e=null,b=null,lt=null,k=null,at=null,d=null,o=null,s=null,g=null,vt=null,nt=null,tt=null,it=null,y=null,l=null,rt=null,u=!1,f=[],p=!1,a,ft;if(!c&&i&&i.gebc&&i.sc&&i.sw&&i.sh&&i.ga&&i.gfbc&&i.st&&i.ac&&i.ss&&t&&r&&r.showElementFromList&&r.showElementTree&&v&&v.bind&&(e=i.gfbc,b=i.sepd,lt=i.ga,at=i.sc,d=i.rc,o=i.sw,s=i.sh,g=i.ss,vt=i.st,nt=i.ac,it=i.gsh,u=typeof i.isTest=="function"?i.isTest():!1,tt=r.showElementFromList,y=r.showElement,l=r.showElementTree,k=r.getThumbUrlOrMockThumbUrl,rt=v.bind,c=!0),c&&_w&&!_w[w]){_w[w]=n;function yt(n,t,i,r,u,e,o,s){if(c&&n&&n.length>1){if(!u||!o||!o.thid||!e||e.length<1||!r)return;f[n]&&(f[n]=null);f[n]=new ft(n,t,i,r,u,e,o,s)}return}pt();n.init=yt}n.clientHeight=bt;ft=function(){function n(n,i,r,f,h,c,v,p){var w=this,rt,k;(this.imageThumbnailId=null,this.smtThumbnailLink=null,this.videoPlayer=null,this.imageContainer=null,this.smtContainer=null,this.thumbnailContainer=null,this.playerOverlay=null,this.thumbnailPlayerMeta=null,this.instMeta=null,this.thumbnailClientWidth=0,this.thumbnailClientHeight=0,this.pidStr=null,this.isAdultThumb=!1,this.eventBinded=!1,this.richHoverConfig=null,this.isCanceled=!1,this.playerNameStr=null,this.clientHeight=0,this.elementIntialize=function(n,t,i){return(w.isAdultThumb=w.thumbnailPlayerMeta.isAdultThumb,!w.thumbnailPlayerMeta.thid||w.thumbnailPlayerMeta.thid.length<1)?!1:(w.richHoverConfig=n,w.smtThumbnailLink=w.thumbnailPlayerMeta.smtThumbUrl,w.playerNameStr=i,w.thumbnailClientWidth=w.thumbnailPlayerMeta.thumbnailWidth,w.thumbnailClientHeight=w.thumbnailPlayerMeta.thumbnailHeight,w.thumbnailContainer=e(st,t),w.thumbnailContainer==null)?!1:(sj_be(w.thumbnailContainer,"click",w.onClick),sj_be(w.thumbnailContainer,"mousemove",w.onMouseMove),o(w.thumbnailContainer,w.thumbnailClientWidth),s(w.thumbnailContainer,w.thumbnailClientHeight),w.pidStr=w.richHoverConfig.pid,w.imageThumbnailId=w.thumbnailPlayerMeta.thid,!0)},this.prepareSMTPlayer=function(){if(w.updatePlayerStatus(VRHEnums.PlayerStatus.None),w.richHoverConfig.fdmtp)return!1;if(w.smtThumbnailLink){if(w.smtContainer=e(ot,w.thumbnailContainer),!w.smtContainer)return!1;if(w.playerOverlay=e(ht,w.thumbnailContainer),o(w.smtContainer,w.thumbnailClientWidth),s(w.smtContainer,w.thumbnailClientHeight),o(w.playerOverlay,w.thumbnailClientWidth),s(w.playerOverlay,w.thumbnailClientHeight),typeof Html5VideoSMTPlayer!="undefined"&&(w.videoPlayer=Html5VideoSMTPlayer),w.videoPlayer&&w.videoPlayer.init&&w.videoPlayer.init(w.smtContainer,w.playerNameStr,w.thumbnailPlayerMeta,w.instMeta,w.richHoverConfig.enmuteinst))return w.updatePlayerStatus(VRHEnums.PlayerStatus.Loading),a=0,w.eventBind(),!0}return!1},this.eventBind=function(){sj_evt.bind(t.PlayerLoadEvt,w.onVideoLoadding);sj_evt.bind(t.PlayerEndEvt,w.onVideoStop);sj_evt.bind(t.PlayerStartEvt,w.onVideoStart);sj_evt.bind(t.PlayerDownloadEndEvt,w.onVideoDownloadFinish);sj_evt.bind(t.MMSTSeekEvt,w.onVideoSeek);sj_evt.bind(t.FallbackToNonSMTEvt,w.onFallbackToNonSMT);sj_evt.bind(t.PlayerErrEvt,w.onVideoPlayErr);sj_evt.bind(t.HoverCancelEvt,w.onHoverCancel);u&&sj_evt.bind(t.HoverDisplay,w.onHoverDisplay);w.eventBinded=!0},this.eventUnbind=function(){w.eventBinded&&(sj_evt.unbind(t.PlayerLoadEvt,w.onVideoLoadding),sj_evt.unbind(t.PlayerEndEvt,w.onVideoStop),sj_evt.unbind(t.PlayerStartEvt,w.onVideoStart),sj_evt.unbind(t.PlayerDownloadEndEvt,w.onVideoDownloadFinish),sj_evt.unbind(t.MMSTSeekEvt,w.onVideoSeek),sj_evt.unbind(t.PlayerErrEvt,w.onVideoPlayErr),u&&sj_evt.unbind(t.HoverDisplay,w.onHoverDisplay),w.eventBinded=!1)},this.isCallMe=function(n){return w.videoPlayer&&n&&n.length>2&&n[2]===w.playerNameStr},this.onVideoPlayErr=function(n){w.isCallMe(n)&&(w.updatePlayerStatus(VRHEnums.PlayerStatus.Stopped),w.isCanceled=!1,l(w.smtContainer,!1));sj_evt.fire(t.FallbackToNonSMTEvt)},this.onHoverCancel=function(){w.eventUnbind()},this.onHoverDisplay=function(){u&&console.log("hit hover player")},this.onVideoStart=function(n){if(w.videoPlayerStatus!==VRHEnums.PlayerStatus.Playing&&w.isCallMe(n))if(w.isCanceled)w.onVideoStop(n);else a===0&&(a=sb_st(function(){if((sb_ct(a),w.videoPlayerStatus!==VRHEnums.PlayerStatus.Playing)&&w.videoPlayer&&w.isCanceled){w.onVideoStop(n);return}},20))},this.onVideoSeek=function(n){if(w.videoPlayerStatus===VRHEnums.PlayerStatus.Playing&&n&&!(n.length<3)&&w.videoPlayer&&w.videoPlayer.seekVideo){var t=parseInt(n[2]);isNaN(t)||w.videoPlayer.seekVideo(t)}},this.onVideoLoadding=function(n){w.isCallMe(n)&&w.updatePlayerStatus(VRHEnums.PlayerStatus.Loading)},this.onVideoStop=function(n){w.isCallMe(n)&&(w.updatePlayerStatus(VRHEnums.PlayerStatus.Stopped),w.isCanceled=!1,l(w.smtContainer,!1))},this.onVideoDownloadFinish=function(){w.smtContainer&&(w.updatePlayerStatus(VRHEnums.PlayerStatus.Playing),l(w.smtContainer,!0),u&&sj_evt.fire(t.HoverDisplay))},this.onFallbackToNonSMT=function(){w.imageContainer&&(y(w.imageContainer,!0),u&&sj_evt.fire(t.HoverDisplay))},this.onThumbnailLoaded=function(){y(w.imageContainer,!0);sj_evt.fire(t.HoverThumbLoadEvt,w.instMeta,w.playerNameStr)},this.onMouseMove=function(n){var t,i,r=(i=(t=w.thumbnailPlayerMeta)===null||t===void 0?void 0:t.eventHandlerMap)===null||i===void 0?void 0:i[VRHEnums.TriggerEvent.PlayerMouseMove];w.invokeEventHandlers(n,r)},this.onClick=function(n){var t,i,r=(i=(t=w.thumbnailPlayerMeta)===null||t===void 0?void 0:t.eventHandlerMap)===null||i===void 0?void 0:i[VRHEnums.TriggerEvent.PlayerClick];w.invokeEventHandlers(n,r)},this.invokeEventHandlers=function(n,i){for(var r=0;r<(i===null||i===void 0?void 0:i.length);r++)switch(i[r]){case VRHEnums.EventHandler.ReplayPlayer:sj_evt.fire(t.PlayerReplayEvt,w.instMeta,w.playerNameStr);w.updatePlayerStatus(VRHEnums.PlayerStatus.Playing);break;case VRHEnums.EventHandler.TogglePlayerPlayAndPause:w.togglePlayerStatusBetweenPauseAndPlay()&&b(n)}},this.togglePlayerStatusBetweenPauseAndPlay=function(){return w.videoPlayerStatus===VRHEnums.PlayerStatus.Paused?(sj_evt.fire(t.PlayerReplayEvt,w.instMeta,w.playerNameStr),w.updatePlayerStatus(VRHEnums.PlayerStatus.Playing),!0):w.videoPlayerStatus===VRHEnums.PlayerStatus.Playing?(sj_evt.fire(t.PlayerPauseEvt,w.instMeta,w.playerNameStr),w.updatePlayerStatus(VRHEnums.PlayerStatus.Paused),!0):!1},this.initializeThumbnailContainer=function(n,t){if(w.imageContainer=e(et,t),!w.imageContainer)return!1;var i=ut(VRHEnums.ThumbnailType.ST,w.imageThumbnailId,w.isAdultThumb,w.hoverType,w.thumbnailClientWidth,w.thumbnailClientHeight,w.pidStr,w.smtThumbnailLink);return i==null?!1:(w.thumbnailPlayerMeta.smtThumbUrl&&(w.thumbnailPlayerMeta.smtThumbUrl=ut(VRHEnums.ThumbnailType.MT,w.imageThumbnailId,w.isAdultThumb,w.hoverType,w.thumbnailClientWidth,w.thumbnailClientHeight,w.pidStr,w.smtThumbnailLink)),w.thumbnailPlayerMeta.imageThumbUrl=i,w.imageContainer.onload=w.onThumbnailLoaded,w.imageContainer.src=i,w.imageContainer.alt=w.thumbnailPlayerMeta.videoTitle,w.thumbnailPlayerMeta.beginClipIndex>1?g(w.imageContainer,"margin-left",(1-w.thumbnailPlayerMeta.beginClipIndex)*w.thumbnailClientWidth+"px"):(o(w.imageContainer,w.thumbnailClientWidth),s(w.imageContainer,w.thumbnailClientHeight)),!0)},this.updatePlayerStatus=function(n){var u,i,r;for(u in t.PlayerStatusClassName)i=t.PlayerStatusClassName[u],i&&d(w.thumbnailContainer,i);return r=t.PlayerStatusClassName[n],r&&nt(w.thumbnailContainer,r),w.videoPlayerStatus=n,!0},!n||n.length<1||!v)||(this.thumbnailPlayerMeta=v,this.hoverType=r,p&&(this.instMeta=p),rt=new Array(0),this.elementIntialize(f,h,c))&&this.initializeThumbnailContainer(rt,this.thumbnailContainer)&&(rt.push(this.thumbnailContainer),k=this.prepareSMTPlayer(rt),k||sj_evt.fire(VRHConsts.FallbackToNonSMTEvt),ThumbnailPlayerOverlay&&ThumbnailPlayerOverlay.init&&ThumbnailPlayerOverlay.init(n,h,this.playerNameStr,i,r,this.richHoverConfig,this.thumbnailPlayerMeta,p,k,k?this.videoPlayer.setVolume:null,k?this.videoPlayer.setLastStableVolume:null,k?this.videoPlayer.setMute:null,k?this.videoPlayer.getVolume:null,k?this.videoPlayer.isMute:null),tt(rt,!0),this.clientHeight=it(this.thumbnailContainer))}return n}()})(ThumbnailPlayer||(ThumbnailPlayer={}))