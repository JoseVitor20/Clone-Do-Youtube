var VideoRichHoverInst;(function(n){function c(n,i){f&&t&&n&&f.bind&&!(n.length<1)&&(h=f.bind,e[n]&&(e[n]=null),e[n]=new s(i.enperfinst,i.enhoverhb,i.enmmstinst,i.chflturl&&i.chflturl.length>0,i.enmuteinst,i.hoverdelayms,i.instName,i.fid,n,i.hecm))}function i(n,t){return Math.max(t-n,0)}function l(n,t,i){var r={T:"CI.RichHover.Summary",AppNS:n,K:t,TS:null,DU:null,THLT:null,RCLT:null,MOS:null,MOT:null,IsMT:0,VPST:null,VDT:null,MaxVPT:null,SCNT:0,MMSTLT:null,IsMMT:null,MuteCNT:0,Mute:null,IFLT:null,IFSCT:null};(i===VRHEnums.ThumbnailType.MT||i===VRHEnums.ThumbnailType.MMMT)&&(r.IsMMT=0,r.VPST=null,r.VDT=null,r.MaxVPT=null);switch(i){case VRHEnums.ThumbnailType.MT:r.IsMT=1;break;case VRHEnums.ThumbnailType.MMMT:r.IsMMT=1;r.IsMT=1;r.SCNT=0;r.MMSTLT=null}return r}function r(n,t,i,r,u,f){return{T:"CI.Hover",AppNS:n,K:t,Name:i,TS:sb_gt(),HType:r,FID:u,TType:f}}function a(n,t,i,r,u,f){return{T:"CI.RichHover_Channel",AppNS:n,K:t,Name:i,TS:sb_gt(),PubUser:r,PubId:u,EventType:f}}function v(n,t,i,r){return{T:"CI.RichHover_MMSTHover",AppNS:n,K:t,Name:r,TS:sb_gt(),EN:"mmst_hover",Index:i}}function y(n,t){n!==null&&o&&o.RegisterEventFunc("Hover",n.reid,n.murl,{HoverTime:t})}var u="undefined",f=typeof SmartEvent!=u?SmartEvent:null,t=typeof VRHConsts!=u?VRHConsts:null,h,e=[],o=typeof OpalRecoInst!=u?OpalRecoInst:null,s;n.init=c;s=function(){function n(n,u,f,e,o,s,h,c,y,p){var w=this;this.hoverDelayTime=0;this.enablePerf=!1;this.enableHover=!1;this.enableMMSTHover=!1;this.instTimers=[];this.bindEvents=function(){sj_evt.bind(t.HoverMouseInEvt,w.mouseIn);sj_evt.bind(t.HoverMouseOutEvt,w.mouseOut);w.enablePerf&&(sj_evt.bind(t.HoverCaptionLoadEvt,w.richCaptionLoaded),sj_evt.bind(t.HoverMMSTLoadEvt,w.mmstLoaded),sj_evt.bind(t.PlayerDownloadEndEvt,w.videoDownloaded),sj_evt.bind(t.PlayerEndEvt,w.videoEnd),sj_evt.bind(t.PlayerStartEvt,w.videoStart),sj_evt.bind(t.HoverThumbLoadEvt,w.thumbnailLoaded),sj_evt.bind(t.IframeLoadedEvt,w.iframeLoaded),sj_evt.bind(t.IframeScrollEvt,w.iframeScroll));w.enableHover&&sj_evt.bind(t.HoverStartEvt,w.hoverStart);w.enableMMSTHover&&sj_evt.bind(t.MMSTSeekEvt,w.seek);w.enableChannelFilter&&sj_evt.bind(t.HoverChannelFilterEvt,w.channelEvent);w.enableMuteInst&&sj_evt.bind(t.HoverMuteEvt,w.muteClick)};this.isCallMe=function(n){return n&&n.length>1&&n[1]&&n[1].AppNS&&n[1].K&&n[1].HoverContainerId&&w.nameSpace===n[1].AppNS&&w.kValue===n[1].K&&w.containerName===n[1].HoverContainerId?!0:!1};this.getTriggerType=function(n){return n&&n.length>2&&!isNaN(n[2])?n[2]:-1};this.mouseIn=function(n){var r,u,f,e,o,s,h,c,t;!n&&n.length<4||(t=[],t.push(n[0]),t.push((r=n[1])===null||r===void 0?void 0:r.instMetaData),w.isCallMe(t))||(w.nameSpace=(f=(u=n[1])===null||u===void 0?void 0:u.instMetaData)===null||f===void 0?void 0:f.AppNS,w.kValue=(o=(e=n[1])===null||e===void 0?void 0:e.instMetaData)===null||o===void 0?void 0:o.K,w.hoverType=(h=(s=n[1])===null||s===void 0?void 0:s.instMetaData)===null||h===void 0?void 0:h.HoverType,w.videoRichHoverMetaData=(c=n[1])===null||c===void 0?void 0:c.videoRichHoverMetaData,w.thumbnailType=n[3],(w.enablePerf||w.enableMMSTHover||w.enableMuteInst)&&(w.perfInst=l(w.nameSpace,w.kValue,w.thumbnailType),w.perfInst.MOS=i(_G.ST,sb_gt()),w.mouseInStartTime=sb_gt()))};this.mouseOut=function(n){w.isCallMe(n)&&(w.enablePerf&&w.perfInst&&(w.perfInst.TS=sb_gt(),w.perfInst.MOT=i(w.mouseInStartTime,w.perfInst.TS),w.perfInst.DU=Math.max(w.perfInst.MOT,w.perfInst.MMSTLT,w.perfInst.THLT,w.perfInst.RCLT),w.perfInst.MaxVPT||(w.perfInst.MaxVPT=w.perfInst.MOT),w.perfInst.MOS>0&&w.perfInst.MOT>w.hoverDelayTime+100&&mmLog(JSON.stringify(w.perfInst)),w.perfInst=null),w.nameSpace=null,w.kValue=null,w.hoverType=null,w.hoverStartTime=null,w.mouseInStartTime=null,w.videoStartTime=null,w.perfInst=null,w.videoRichHoverMetaData=null);w.hoverStop=!0;w.unbindInstrumentationEvents()};this.hoverStart=function(n){var u,f,e,i,o,s,h,c;if(w.isCallMe(n)&&(w.hoverStop=!1,w.hoverStartTime=sb_gt(),w.enableHover)){i=w.getTriggerType(n);o=r(w.nameSpace,w.kValue,w.instName,"h",w.featureID,i);mmLog(JSON.stringify(o));switch(i){case VRHEnums.TriggerType.AutoplayTrigger:s=r(w.nameSpace,w.kValue,w.instName,"a",w.featureID,i);mmLog(JSON.stringify(s));break;case VRHEnums.TriggerType.HoverLoopPlayTrigger:h=r(w.nameSpace,w.kValue,w.instName,"l",w.featureID,i);mmLog(JSON.stringify(h));break;default:c=(e=(f=(u=w.experienceConfigMap)===null||u===void 0?void 0:u[i])===null||f===void 0?void 0:f.iccs)!==null&&e!==void 0?e:t.DefaultInstrumentationContentConfigs;w.bindCustomInstrumentationEvents(c,i);w.bindLegacyInstrumentationEvents(n)}}};this.channelEvent=function(n){w.isCallMe(n)!==!1&&(n.length<5&&n[2]&&n[2].length>0&&n[3]&&n[3].length>0&&n[4]&&n[4].length>0||mmLog(JSON.stringify(a(w.nameSpace,w.kValue,w.instName,n[3],n[4],n[5]))))};this.unbindInstrumentationEvents=function(){for(var n=0;n<w.instTimers.length;n++)sb_ct(w.instTimers[n]);w.instTimers=[]};this.videoStart=function(n){w.isCallMe(n)&&!w.videoStartTime&&(w.videoStartTime=sb_gt(),w.perfInst.VPST=i(w.mouseInStartTime,w.videoStartTime))};this.videoEnd=function(n){w.isCallMe(n)&&!w.perfInst.MaxVPT&&(w.perfInst.MaxVPT=i(w.videoStartTime,sb_gt()))};this.muteClick=function(n){w.isCallMe(n)&&w.perfInst&&(w.perfInst.MuteCNT++,n.length>2&&(w.perfInst.Mute=n[2]===!0?1:0))};this.seek=function(n){if(w.isCallMe(n)&&(w.perfInst&&w.perfInst.SCNT++,w.enableMMSTHover)){if(!n||n.length<3)return;var t=parseInt(n[2]);if(!w.nameSpace||!w.kValue||isNaN(t))return;mmLog(JSON.stringify(v(w.nameSpace,w.kValue,t,w.instName)))}};this.videoDownloaded=function(n){w.isCallMe(n)&&w.perfInst&&!w.perfInst.VDT&&(w.perfInst.VDT=i(w.mouseInStartTime,sb_gt()),w.enableMuteInst&&n.length>3&&(w.perfInst.Mute=n[3]===!0?1:0))};this.thumbnailLoaded=function(n){w.isCallMe(n)&&w.perfInst&&!w.perfInst.THLT&&(w.perfInst.THLT=i(w.mouseInStartTime,sb_gt()))};this.mmstLoaded=function(n){w.isCallMe(n)&&w.perfInst&&!w.perfInst.MMSTLT&&(w.perfInst.MMSTLT=i(w.mouseInStartTime,sb_gt()))};this.richCaptionLoaded=function(n){w.isCallMe(n)&&w.perfInst&&!w.perfInst.RCLT&&(w.perfInst.RCLT=i(w.mouseInStartTime,sb_gt()))};this.iframeLoaded=function(n){if(w.isCallMe(n)&&n.length>2&&w.perfInst&&!w.perfInst.IFLT){var t=n[2];w.perfInst.IFLT=i(w.mouseInStartTime,sb_gt());t||(w.perfInst.IFLT=-w.perfInst.IFLT)}};this.iframeScroll=function(n){w.isCallMe(n)&&w.perfInst&&!w.perfInst.IFSCT&&(w.perfInst.IFSCT=i(w.mouseInStartTime+w.perfInst.IFLT,sb_gt()))};s>0&&(this.hoverDelayTime=s);this.enablePerf=n;this.enableHover=u;this.enableMMSTHover=f;this.enableChannelFilter=e;this.enableMuteInst=o;this.instName=h;this.featureID=c;this.containerName=y;this.experienceConfigMap=p;this.bindEvents()}return n.prototype.bindLegacyInstrumentationEvents=function(n){var t=this,i=sb_st(function(){t.hoverStop||(sj_evt.fire(VRHConsts.Hover5SEvt,n),y(t.videoRichHoverMetaData,5e3))},5e3);this.instTimers.push(i)},n.prototype.bindCustomInstrumentationEvents=function(n,t){for(var i=this,f=function(u){var o=n[u],f,s,h;if(!o||(f=o.tm,s=o.sin,!s||isNaN(f)||typeof f!="number"||f<0))return"continue";h=sb_st(function(){i.hoverStop||mmLog(JSON.stringify(r(i.nameSpace,i.kValue,i.instName,s,i.featureID,t)))},f);e.instTimers.push(h)},e=this,u=0;u<(n===null||n===void 0?void 0:n.length);u++)f(u)},n}()})(VideoRichHoverInst||(VideoRichHoverInst={}))